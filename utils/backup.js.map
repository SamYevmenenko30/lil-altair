{"version":3,"file":"backup.js","sources":["utils/backup.ts"],"sourceRoot":"/","sourcesContent":["import { app, BrowserWindow, dialog } from 'electron';\nimport ElectronStore from 'electron-store';\nimport fs from 'fs';\n\nexport const setAutobackup = (data: string) => {\n  const backupStore = new ElectronStore({ name: 'autobackup' });\n  backupStore.set('autobackup', data);\n};\n\nexport const getAutobackup = () => {\n  const backupStore = new ElectronStore({ name: 'autobackup' });\n  return backupStore.get('autobackup');\n};\n\nexport const importBackupData = (instance: BrowserWindow) => {\n  // const store = new PersistentStore();\n  dialog\n    .showOpenDialog(instance, {\n      title: 'Import application data',\n      message: 'Only import a valid Altair backup file',\n      properties: ['openFile'],\n      filters: [{ name: 'Altair GraphQL Backup Files', extensions: ['agbkp'] }],\n    })\n    .then(({ canceled, filePaths: [filePath] }) => {\n      if (canceled) {\n        return;\n      }\n\n      if (filePath) {\n        const fileContent = fs.readFileSync(filePath, 'utf8');\n        try {\n          instance.webContents.send('import-app-data', fileContent);\n        } catch (error) {\n          dialog.showErrorBox(\n            'Invalid file',\n            'The selected file is either invalid or corrupted. Please check the file and try again.'\n          );\n        }\n      }\n    });\n};\n"],"names":[],"mappings":";;;;;;;;AAAA,uCAAsD;AACtD,oEAA2C;AAC3C,4CAAoB;AAEb,MAAM,aAAa,GAAG,CAAC,IAAY,EAAE,EAAE;IAC5C,MAAM,WAAW,GAAG,IAAI,wBAAa,CAAC,EAAE,IAAI,EAAE,YAAY,EAAE,CAAC,CAAC;IAC9D,WAAW,CAAC,GAAG,CAAC,YAAY,EAAE,IAAI,CAAC,CAAC;AACtC,CAAC,CAAC;AAHW,QAAA,aAAa,iBAGxB;AAEK,MAAM,aAAa,GAAG,GAAG,EAAE;IAChC,MAAM,WAAW,GAAG,IAAI,wBAAa,CAAC,EAAE,IAAI,EAAE,YAAY,EAAE,CAAC,CAAC;IAC9D,OAAO,WAAW,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC;AACvC,CAAC,CAAC;AAHW,QAAA,aAAa,iBAGxB;AAEK,MAAM,gBAAgB,GAAG,CAAC,QAAuB,EAAE,EAAE;IAC1D,uCAAuC;IACvC,iBAAM;SACH,cAAc,CAAC,QAAQ,EAAE;QACxB,KAAK,EAAE,yBAAyB;QAChC,OAAO,EAAE,wCAAwC;QACjD,UAAU,EAAE,CAAC,UAAU,CAAC;QACxB,OAAO,EAAE,CAAC,EAAE,IAAI,EAAE,6BAA6B,EAAE,UAAU,EAAE,CAAC,OAAO,CAAC,EAAE,CAAC;KAC1E,CAAC;SACD,IAAI,CAAC,CAAC,EAAE,QAAQ,EAAE,SAAS,EAAE,CAAC,QAAQ,CAAC,EAAE,EAAE,EAAE;QAC5C,IAAI,QAAQ,EAAE,CAAC;YACb,OAAO;QACT,CAAC;QAED,IAAI,QAAQ,EAAE,CAAC;YACb,MAAM,WAAW,GAAG,YAAE,CAAC,YAAY,CAAC,QAAQ,EAAE,MAAM,CAAC,CAAC;YACtD,IAAI,CAAC;gBACH,QAAQ,CAAC,WAAW,CAAC,IAAI,CAAC,iBAAiB,EAAE,WAAW,CAAC,CAAC;YAC5D,CAAC;YAAC,OAAO,KAAK,EAAE,CAAC;gBACf,iBAAM,CAAC,YAAY,CACjB,cAAc,EACd,wFAAwF,CACzF,CAAC;YACJ,CAAC;QACH,CAAC;IACH,CAAC,CAAC,CAAC;AACP,CAAC,CAAC;AA1BW,QAAA,gBAAgB,oBA0B3B","debug_id":"93be8615-c7da-568b-a42c-e61848f81468"}