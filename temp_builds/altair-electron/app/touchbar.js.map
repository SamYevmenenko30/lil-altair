{"version":3,"file":"touchbar.js","sources":["app/touchbar.ts"],"sourceRoot":"/","sourcesContent":["import { TouchBar } from 'electron';\nimport { ActionManager } from './actions';\nimport { InteropStateManager } from '../interop-state-manager';\nimport { Subscription } from 'rxjs';\n\nconst { TouchBarButton, TouchBarSpacer } = TouchBar;\n\nexport class TouchbarManager {\n  private docsButton?: Electron.TouchBarButton;\n  private docStateSubscription?: Subscription;\n  constructor(\n    private actionManager: ActionManager,\n    private interopStateManager: InteropStateManager\n  ) {}\n\n  createTouchBar() {\n    if (this.docStateSubscription) {\n      this.docStateSubscription.unsubscribe();\n    }\n\n    const sendRequestButton = new TouchBarButton({\n      label: 'Send Request',\n      backgroundColor: '#7EBC59',\n      click: () => this.actionManager.sendRequest(),\n    });\n\n    const reloadDocsButton = new TouchBarButton({\n      label: 'Reload Docs',\n      click: () => this.actionManager.reloadDocs(),\n    });\n\n    this.docsButton = new TouchBarButton({\n      label: 'Show Docs',\n      click: () => this.actionManager.showDocs(),\n    });\n\n    const spacer = new TouchBarSpacer({\n      size: 'flexible',\n    });\n\n    const touchBar = new TouchBar({\n      items: [\n        // spin,\n        sendRequestButton,\n        spacer,\n        reloadDocsButton,\n        this.docsButton,\n      ],\n    });\n\n    this.docStateSubscription = this.interopStateManager\n      .asActiveWindowStateObservable()\n      .subscribe((state) => {\n        this.updateDocsButtonState(state.showDocs);\n      });\n\n    return touchBar;\n  }\n\n  updateDocsButtonState(docsVisible: boolean) {\n    if (!this.docsButton) {\n      return;\n    }\n\n    this.docsButton.label = docsVisible ? 'Hide Docs' : 'Show Docs';\n  }\n}\n"],"names":[],"mappings":";;;;;AAAA,uCAAoC;AAKpC,MAAM,EAAE,cAAc,EAAE,cAAc,EAAE,GAAG,mBAAQ,CAAC;AAEpD,MAAa,eAAe;IAG1B,YACU,aAA4B,EAC5B,mBAAwC;QADxC,kBAAa,GAAb,aAAa,CAAe;QAC5B,wBAAmB,GAAnB,mBAAmB,CAAqB;IAC/C,CAAC;IAEJ,cAAc;QACZ,IAAI,IAAI,CAAC,oBAAoB,EAAE,CAAC;YAC9B,IAAI,CAAC,oBAAoB,CAAC,WAAW,EAAE,CAAC;QAC1C,CAAC;QAED,MAAM,iBAAiB,GAAG,IAAI,cAAc,CAAC;YAC3C,KAAK,EAAE,cAAc;YACrB,eAAe,EAAE,SAAS;YAC1B,KAAK,EAAE,GAAG,EAAE,CAAC,IAAI,CAAC,aAAa,CAAC,WAAW,EAAE;SAC9C,CAAC,CAAC;QAEH,MAAM,gBAAgB,GAAG,IAAI,cAAc,CAAC;YAC1C,KAAK,EAAE,aAAa;YACpB,KAAK,EAAE,GAAG,EAAE,CAAC,IAAI,CAAC,aAAa,CAAC,UAAU,EAAE;SAC7C,CAAC,CAAC;QAEH,IAAI,CAAC,UAAU,GAAG,IAAI,cAAc,CAAC;YACnC,KAAK,EAAE,WAAW;YAClB,KAAK,EAAE,GAAG,EAAE,CAAC,IAAI,CAAC,aAAa,CAAC,QAAQ,EAAE;SAC3C,CAAC,CAAC;QAEH,MAAM,MAAM,GAAG,IAAI,cAAc,CAAC;YAChC,IAAI,EAAE,UAAU;SACjB,CAAC,CAAC;QAEH,MAAM,QAAQ,GAAG,IAAI,mBAAQ,CAAC;YAC5B,KAAK,EAAE;gBACL,QAAQ;gBACR,iBAAiB;gBACjB,MAAM;gBACN,gBAAgB;gBAChB,IAAI,CAAC,UAAU;aAChB;SACF,CAAC,CAAC;QAEH,IAAI,CAAC,oBAAoB,GAAG,IAAI,CAAC,mBAAmB;aACjD,6BAA6B,EAAE;aAC/B,SAAS,CAAC,CAAC,KAAK,EAAE,EAAE;YACnB,IAAI,CAAC,qBAAqB,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC;QAC7C,CAAC,CAAC,CAAC;QAEL,OAAO,QAAQ,CAAC;IAClB,CAAC;IAED,qBAAqB,CAAC,WAAoB;QACxC,IAAI,CAAC,IAAI,CAAC,UAAU,EAAE,CAAC;YACrB,OAAO;QACT,CAAC;QAED,IAAI,CAAC,UAAU,CAAC,KAAK,GAAG,WAAW,CAAC,CAAC,CAAC,WAAW,CAAC,CAAC,CAAC,WAAW,CAAC;IAClE,CAAC;CACF;AA3DD,0CA2DC","debug_id":"6f9bebd2-8e6c-5d6b-8471-87d4dce10e2c"}