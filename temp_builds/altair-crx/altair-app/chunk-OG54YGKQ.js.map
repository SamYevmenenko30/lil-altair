{"version":3,"sources":["../../node_modules/.pnpm/curlup@1.0.0/node_modules/curlup/index.js"],"sourcesContent":["const LITERAL_NAMES = {\n  CURL: 'curl',\n  INCLUDE_HEADERS: 'include-headers',\n  SILENT: 'run-silent',\n  USE_GET: 'use-get',\n  COMPRESSED: 'compressed',\n  STATES: {\n    HEADER: 'header-state',\n    CUSTOM_METHOD: 'custom-method-state',\n    DATA: 'data-state',\n    USER: 'user-state'\n  },\n  STRING: 'string',\n  OTHERS: 'others'\n};\nconst literals = [{\n  regex: /^\\bcurl\\b/,\n  name: LITERAL_NAMES.CURL\n}, {\n  regex: /^(-H|--header)/,\n  name: LITERAL_NAMES.STATES.HEADER\n}, {\n  regex: /^-X/,\n  name: LITERAL_NAMES.STATES.CUSTOM_METHOD\n}, {\n  regex: /^(-u|--user)/,\n  name: LITERAL_NAMES.STATES.USER\n}, {\n  regex: /^(-d|--data)/,\n  name: LITERAL_NAMES.STATES.DATA\n}, {\n  regex: /^--compressed/,\n  name: LITERAL_NAMES.COMPRESSED\n}, {\n  regex: /^(-i|--include)/,\n  name: LITERAL_NAMES.INCLUDE_HEADERS\n}, {\n  regex: /^(-s|--silent)/,\n  name: LITERAL_NAMES.SILENT\n}, {\n  regex: /^(-G|--get)/,\n  name: LITERAL_NAMES.USE_GET\n}, {\n  regex: /^'[^']*'/,\n  name: LITERAL_NAMES.STRING\n}, {\n  regex: /^\"[^\"]*\"/,\n  name: LITERAL_NAMES.STRING\n}, {\n  regex: /^[^\\n\\r\\s]*/,\n  name: LITERAL_NAMES.STRING\n}, {\n  regex: /^.*/,\n  name: LITERAL_NAMES.OTHERS\n}];\nconst trimValue = val => val.trim().replace(/^('|\")\\s*/, '').replace(/\\s*('|\")$/, '');\nconst isURL = val => /((([A-Za-z]{3,9}:(?:\\/\\/)?)(?:[\\-;:&=\\+\\$,\\w]+@)?[A-Za-z0-9\\.\\-]+|(?:www\\.|[\\-;:&=\\+\\$,\\w]+@)[A-Za-z0-9\\.\\-]+)((?:\\/[\\+~%\\/\\.\\w\\-_]*)?\\??(?:[\\-\\+=&;%@\\.\\w_]*)#?(?:[\\.\\!\\/\\\\\\w]*))?)/.test(val);\nconst parseCurl = curlCmd => {\n  let cmd = curlCmd.trim();\n  const tokens = [];\n  const result = {\n    url: '',\n    method: 'GET',\n    headers: {},\n    auth: {}\n  };\n  while (cmd) {\n    literals.some(literal => {\n      if (literal.regex.test(cmd)) {\n        tokens.push({\n          name: literal.name,\n          value: cmd.match(literal.regex)\n        });\n        cmd = cmd.replace(literal.regex, '').trim();\n        return true;\n      }\n    });\n  }\n\n  // console.log(JSON.stringify(tokens, null, 2));\n  if (tokens.length) {\n    if (tokens.shift().name !== 'curl') {\n      throw new Error('Not a curl command.');\n    }\n    let state = '';\n    tokens.forEach(token => {\n      if (!state) {\n        switch (token.name) {\n          case LITERAL_NAMES.STATES.HEADER:\n            state = LITERAL_NAMES.STATES.HEADER;\n            break;\n          case LITERAL_NAMES.STATES.DATA:\n            state = LITERAL_NAMES.STATES.DATA;\n            break;\n          case LITERAL_NAMES.STATES.CUSTOM_METHOD:\n            state = LITERAL_NAMES.STATES.CUSTOM_METHOD;\n            break;\n          case LITERAL_NAMES.STATES.USER:\n            state = LITERAL_NAMES.STATES.USER;\n            break;\n          case LITERAL_NAMES.STRING:\n            {\n              const val = trimValue(token.value[0]);\n              if (isURL(val)) {\n                result.url = val;\n              }\n              break;\n            }\n        }\n      } else {\n        switch (state) {\n          case LITERAL_NAMES.STATES.HEADER:\n            {\n              const pair = trimValue(token.value[0]).split(/\\s*:\\s*/);\n              result.headers[pair[0]] = pair[1];\n              break;\n            }\n          case LITERAL_NAMES.STATES.DATA:\n            {\n              const pair = token.value[0];\n              result.data = trimValue(token.value[0]).trim();\n              break;\n            }\n          case LITERAL_NAMES.STATES.CUSTOM_METHOD:\n            {\n              const pair = token.value[0];\n              result.method = trimValue(token.value[0]).trim();\n              break;\n            }\n        }\n        state = '';\n      }\n    });\n  }\n  return result;\n};\nmodule.exports = {\n  parseCurl\n};"],"names":["require_curlup","__commonJSMin","exports","module","LITERAL_NAMES","literals","trimValue","val","isURL","parseCurl","curlCmd","cmd","tokens","result","literal","state","token","pair"],"mappings":"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","debug_id":"8f265bcf-b450-5efd-87c7-128ee0649c91"}