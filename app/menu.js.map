{"version":3,"file":"menu.js","sources":["app/menu.ts"],"sourceRoot":"/","sourcesContent":["import { app, Menu, MenuItemConstructorOptions, shell } from 'electron';\nimport { ActionManager } from './actions';\nimport {\n  getDisableHardwareAcceleration,\n  setDisableHardwareAcceleration,\n} from '../utils/startup';\nimport { restartApp } from '../utils';\n\nexport class MenuManager {\n  constructor(private actionManager: ActionManager) {\n    Menu.setApplicationMenu(this.createMenu());\n  }\n\n  createMenu() {\n    const isMac = process.platform === 'darwin';\n\n    const template: MenuItemConstructorOptions[] = [\n      {\n        label: app.getName(),\n        submenu: [\n          { role: 'about' },\n          {\n            label: 'Check for Updates...',\n            click: (menuItem) => this.actionManager.checkForUpdates(menuItem),\n          },\n          {\n            label: 'Preferences',\n            accelerator: 'Cmd+,',\n            click: () => this.actionManager.showSettings(),\n          },\n          {\n            label: 'Desktop settings...',\n            click: () => this.actionManager.showPreferences(),\n          },\n          ...(isMac\n            ? ([\n                { type: 'separator' },\n                { role: 'services', submenu: [] },\n                { type: 'separator' },\n                { role: 'hide' },\n                { role: 'hideothers' },\n                { role: 'unhide' },\n              ] as MenuItemConstructorOptions[])\n            : []),\n          { type: 'separator' },\n          { role: 'quit' },\n        ],\n      },\n      {\n        label: 'Edit',\n        submenu: [\n          {\n            label: 'New Tab',\n            accelerator: 'CmdOrCtrl+T',\n            click: () => this.actionManager.createTab(),\n          },\n          {\n            label: 'Close Tab',\n            accelerator: 'CmdOrCtrl+W',\n            click: () => this.actionManager.closeTab(),\n          },\n          {\n            label: 'Reopen Closed Tab',\n            accelerator: 'CmdOrCtrl+Shift+T',\n            click: () => this.actionManager.reopenClosedTab(),\n          },\n          { role: 'undo' },\n          { role: 'redo' },\n          { type: 'separator' },\n          { role: 'cut' },\n          { role: 'copy' },\n          { role: 'paste' },\n          { role: 'pasteAndMatchStyle' },\n          { role: 'delete' },\n          { role: 'selectAll' },\n          ...(isMac\n            ? ([\n                { type: 'separator' },\n                {\n                  label: 'Speech',\n                  submenu: [{ role: 'startspeaking' }, { role: 'stopspeaking' }],\n                },\n              ] as MenuItemConstructorOptions[])\n            : []),\n        ],\n      },\n      {\n        label: 'View',\n        submenu: [\n          {\n            label: 'Next Tab',\n            accelerator: 'Ctrl+Tab',\n            click: () => this.actionManager.nextTab(),\n          },\n          {\n            label: 'Previous Tab',\n            accelerator: 'Ctrl+Shift+Tab',\n            click: () => this.actionManager.previousTab(),\n          },\n          { role: 'reload' },\n          { role: 'forceReload' },\n          { role: 'toggleDevTools' },\n          { type: 'separator' },\n          { role: 'togglefullscreen' },\n        ],\n      },\n      {\n        role: 'window',\n        submenu: [\n          { role: 'minimize' },\n          { role: 'close' },\n          getDisableHardwareAcceleration()\n            ? {\n                label: 'Enable hardware acceleration (beta)',\n                click: () => {\n                  setDisableHardwareAcceleration(false);\n                  restartApp(app);\n                },\n              }\n            : {\n                label: 'Disable hardware acceleration (beta)',\n                click: () => {\n                  setDisableHardwareAcceleration(true);\n                  restartApp(app);\n                },\n              },\n          ...(isMac\n            ? ([\n                { role: 'minimize' },\n                { type: 'separator' },\n                { role: 'front' },\n              ] as const)\n            : ([{ role: 'about' }] as const)),\n        ],\n      },\n      {\n        label: 'Data',\n        submenu: [\n          {\n            label: 'Export backup data...',\n            click: () => this.actionManager.exportAppData(),\n          },\n          {\n            label: 'Import backup data...',\n            click: () => this.actionManager.importAppData(),\n          },\n        ],\n      },\n      {\n        label: 'Help',\n        submenu: [\n          {\n            label: 'Open documentation',\n            click: async () => {\n              await shell.openExternal('https://altairgraphql.dev/docs/');\n            },\n          },\n        ],\n      },\n    ];\n\n    return Menu.buildFromTemplate(template);\n  }\n}\n"],"names":[],"mappings":"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","debug_id":"2bcf0242-b7fb-5d56-b628-f338f1fc5a44"}