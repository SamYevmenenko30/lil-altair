{"version":3,"sources":["../../node_modules/.pnpm/backo2@1.0.2/node_modules/backo2/index.js","../../node_modules/.pnpm/eventemitter3@3.1.2/node_modules/eventemitter3/index.js","../../node_modules/.pnpm/subscriptions-transport-ws@0.9.19_bufferutil@4.0.6_graphql@15.5.1_utf-8-validate@5.0.9/node_modules/subscriptions-transport-ws/dist/utils/is-string.js","../../node_modules/.pnpm/subscriptions-transport-ws@0.9.19_bufferutil@4.0.6_graphql@15.5.1_utf-8-validate@5.0.9/node_modules/subscriptions-transport-ws/dist/utils/is-object.js","../../node_modules/.pnpm/symbol-observable@1.2.0/node_modules/symbol-observable/es/ponyfill.js","../../node_modules/.pnpm/symbol-observable@1.2.0/node_modules/symbol-observable/es/index.js","../../node_modules/.pnpm/subscriptions-transport-ws@0.9.19_bufferutil@4.0.6_graphql@15.5.1_utf-8-validate@5.0.9/node_modules/subscriptions-transport-ws/dist/protocol.js","../../node_modules/.pnpm/subscriptions-transport-ws@0.9.19_bufferutil@4.0.6_graphql@15.5.1_utf-8-validate@5.0.9/node_modules/subscriptions-transport-ws/dist/defaults.js","../../node_modules/.pnpm/subscriptions-transport-ws@0.9.19_bufferutil@4.0.6_graphql@15.5.1_utf-8-validate@5.0.9/node_modules/subscriptions-transport-ws/dist/message-types.js","../../node_modules/.pnpm/subscriptions-transport-ws@0.9.19_bufferutil@4.0.6_graphql@15.5.1_utf-8-validate@5.0.9/node_modules/subscriptions-transport-ws/dist/client.js","../altair-core/src/request/handlers/ws.ts"],"sourcesContent":["/**\n * Expose `Backoff`.\n */\n\nmodule.exports = Backoff;\n\n/**\n * Initialize backoff timer with `opts`.\n *\n * - `min` initial timeout in milliseconds [100]\n * - `max` max timeout [10000]\n * - `jitter` [0]\n * - `factor` [2]\n *\n * @param {Object} opts\n * @api public\n */\n\nfunction Backoff(opts) {\n  opts = opts || {};\n  this.ms = opts.min || 100;\n  this.max = opts.max || 10000;\n  this.factor = opts.factor || 2;\n  this.jitter = opts.jitter > 0 && opts.jitter <= 1 ? opts.jitter : 0;\n  this.attempts = 0;\n}\n\n/**\n * Return the backoff duration.\n *\n * @return {Number}\n * @api public\n */\n\nBackoff.prototype.duration = function () {\n  var ms = this.ms * Math.pow(this.factor, this.attempts++);\n  if (this.jitter) {\n    var rand = Math.random();\n    var deviation = Math.floor(rand * this.jitter * ms);\n    ms = (Math.floor(rand * 10) & 1) == 0 ? ms - deviation : ms + deviation;\n  }\n  return Math.min(ms, this.max) | 0;\n};\n\n/**\n * Reset the number of attempts.\n *\n * @api public\n */\n\nBackoff.prototype.reset = function () {\n  this.attempts = 0;\n};\n\n/**\n * Set the minimum duration\n *\n * @api public\n */\n\nBackoff.prototype.setMin = function (min) {\n  this.ms = min;\n};\n\n/**\n * Set the maximum duration\n *\n * @api public\n */\n\nBackoff.prototype.setMax = function (max) {\n  this.max = max;\n};\n\n/**\n * Set the jitter\n *\n * @api public\n */\n\nBackoff.prototype.setJitter = function (jitter) {\n  this.jitter = jitter;\n};","'use strict';\n\nvar has = Object.prototype.hasOwnProperty,\n  prefix = '~';\n\n/**\n * Constructor to create a storage for our `EE` objects.\n * An `Events` instance is a plain object whose properties are event names.\n *\n * @constructor\n * @private\n */\nfunction Events() {}\n\n//\n// We try to not inherit from `Object.prototype`. In some engines creating an\n// instance in this way is faster than calling `Object.create(null)` directly.\n// If `Object.create(null)` is not supported we prefix the event names with a\n// character to make sure that the built-in object properties are not\n// overridden or used as an attack vector.\n//\nif (Object.create) {\n  Events.prototype = Object.create(null);\n\n  //\n  // This hack is needed because the `__proto__` property is still inherited in\n  // some old browsers like Android 4, iPhone 5.1, Opera 11 and Safari 5.\n  //\n  if (!new Events().__proto__) prefix = false;\n}\n\n/**\n * Representation of a single event listener.\n *\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} [once=false] Specify if the listener is a one-time listener.\n * @constructor\n * @private\n */\nfunction EE(fn, context, once) {\n  this.fn = fn;\n  this.context = context;\n  this.once = once || false;\n}\n\n/**\n * Add a listener for a given event.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} once Specify if the listener is a one-time listener.\n * @returns {EventEmitter}\n * @private\n */\nfunction addListener(emitter, event, fn, context, once) {\n  if (typeof fn !== 'function') {\n    throw new TypeError('The listener must be a function');\n  }\n  var listener = new EE(fn, context || emitter, once),\n    evt = prefix ? prefix + event : event;\n  if (!emitter._events[evt]) emitter._events[evt] = listener, emitter._eventsCount++;else if (!emitter._events[evt].fn) emitter._events[evt].push(listener);else emitter._events[evt] = [emitter._events[evt], listener];\n  return emitter;\n}\n\n/**\n * Clear event by name.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} evt The Event name.\n * @private\n */\nfunction clearEvent(emitter, evt) {\n  if (--emitter._eventsCount === 0) emitter._events = new Events();else delete emitter._events[evt];\n}\n\n/**\n * Minimal `EventEmitter` interface that is molded against the Node.js\n * `EventEmitter` interface.\n *\n * @constructor\n * @public\n */\nfunction EventEmitter() {\n  this._events = new Events();\n  this._eventsCount = 0;\n}\n\n/**\n * Return an array listing the events for which the emitter has registered\n * listeners.\n *\n * @returns {Array}\n * @public\n */\nEventEmitter.prototype.eventNames = function eventNames() {\n  var names = [],\n    events,\n    name;\n  if (this._eventsCount === 0) return names;\n  for (name in events = this._events) {\n    if (has.call(events, name)) names.push(prefix ? name.slice(1) : name);\n  }\n  if (Object.getOwnPropertySymbols) {\n    return names.concat(Object.getOwnPropertySymbols(events));\n  }\n  return names;\n};\n\n/**\n * Return the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Array} The registered listeners.\n * @public\n */\nEventEmitter.prototype.listeners = function listeners(event) {\n  var evt = prefix ? prefix + event : event,\n    handlers = this._events[evt];\n  if (!handlers) return [];\n  if (handlers.fn) return [handlers.fn];\n  for (var i = 0, l = handlers.length, ee = new Array(l); i < l; i++) {\n    ee[i] = handlers[i].fn;\n  }\n  return ee;\n};\n\n/**\n * Return the number of listeners listening to a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Number} The number of listeners.\n * @public\n */\nEventEmitter.prototype.listenerCount = function listenerCount(event) {\n  var evt = prefix ? prefix + event : event,\n    listeners = this._events[evt];\n  if (!listeners) return 0;\n  if (listeners.fn) return 1;\n  return listeners.length;\n};\n\n/**\n * Calls each of the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Boolean} `true` if the event had listeners, else `false`.\n * @public\n */\nEventEmitter.prototype.emit = function emit(event, a1, a2, a3, a4, a5) {\n  var evt = prefix ? prefix + event : event;\n  if (!this._events[evt]) return false;\n  var listeners = this._events[evt],\n    len = arguments.length,\n    args,\n    i;\n  if (listeners.fn) {\n    if (listeners.once) this.removeListener(event, listeners.fn, undefined, true);\n    switch (len) {\n      case 1:\n        return listeners.fn.call(listeners.context), true;\n      case 2:\n        return listeners.fn.call(listeners.context, a1), true;\n      case 3:\n        return listeners.fn.call(listeners.context, a1, a2), true;\n      case 4:\n        return listeners.fn.call(listeners.context, a1, a2, a3), true;\n      case 5:\n        return listeners.fn.call(listeners.context, a1, a2, a3, a4), true;\n      case 6:\n        return listeners.fn.call(listeners.context, a1, a2, a3, a4, a5), true;\n    }\n    for (i = 1, args = new Array(len - 1); i < len; i++) {\n      args[i - 1] = arguments[i];\n    }\n    listeners.fn.apply(listeners.context, args);\n  } else {\n    var length = listeners.length,\n      j;\n    for (i = 0; i < length; i++) {\n      if (listeners[i].once) this.removeListener(event, listeners[i].fn, undefined, true);\n      switch (len) {\n        case 1:\n          listeners[i].fn.call(listeners[i].context);\n          break;\n        case 2:\n          listeners[i].fn.call(listeners[i].context, a1);\n          break;\n        case 3:\n          listeners[i].fn.call(listeners[i].context, a1, a2);\n          break;\n        case 4:\n          listeners[i].fn.call(listeners[i].context, a1, a2, a3);\n          break;\n        default:\n          if (!args) for (j = 1, args = new Array(len - 1); j < len; j++) {\n            args[j - 1] = arguments[j];\n          }\n          listeners[i].fn.apply(listeners[i].context, args);\n      }\n    }\n  }\n  return true;\n};\n\n/**\n * Add a listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.on = function on(event, fn, context) {\n  return addListener(this, event, fn, context, false);\n};\n\n/**\n * Add a one-time listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.once = function once(event, fn, context) {\n  return addListener(this, event, fn, context, true);\n};\n\n/**\n * Remove the listeners of a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn Only remove the listeners that match this function.\n * @param {*} context Only remove the listeners that have this context.\n * @param {Boolean} once Only remove one-time listeners.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeListener = function removeListener(event, fn, context, once) {\n  var evt = prefix ? prefix + event : event;\n  if (!this._events[evt]) return this;\n  if (!fn) {\n    clearEvent(this, evt);\n    return this;\n  }\n  var listeners = this._events[evt];\n  if (listeners.fn) {\n    if (listeners.fn === fn && (!once || listeners.once) && (!context || listeners.context === context)) {\n      clearEvent(this, evt);\n    }\n  } else {\n    for (var i = 0, events = [], length = listeners.length; i < length; i++) {\n      if (listeners[i].fn !== fn || once && !listeners[i].once || context && listeners[i].context !== context) {\n        events.push(listeners[i]);\n      }\n    }\n\n    //\n    // Reset the array, or remove it completely if we have no more listeners.\n    //\n    if (events.length) this._events[evt] = events.length === 1 ? events[0] : events;else clearEvent(this, evt);\n  }\n  return this;\n};\n\n/**\n * Remove all listeners, or those of the specified event.\n *\n * @param {(String|Symbol)} [event] The event name.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeAllListeners = function removeAllListeners(event) {\n  var evt;\n  if (event) {\n    evt = prefix ? prefix + event : event;\n    if (this._events[evt]) clearEvent(this, evt);\n  } else {\n    this._events = new Events();\n    this._eventsCount = 0;\n  }\n  return this;\n};\n\n//\n// Alias methods names because people roll like that.\n//\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\nEventEmitter.prototype.addListener = EventEmitter.prototype.on;\n\n//\n// Expose the prefix.\n//\nEventEmitter.prefixed = prefix;\n\n//\n// Allow `EventEmitter` to be imported as module namespace.\n//\nEventEmitter.EventEmitter = EventEmitter;\n\n//\n// Expose the module.\n//\nif ('undefined' !== typeof module) {\n  module.exports = EventEmitter;\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nfunction isString(value) {\n  return typeof value === 'string';\n}\nexports.default = isString;\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nfunction isObject(value) {\n  return value !== null && typeof value === 'object';\n}\nexports.default = isObject;\n","export default function symbolObservablePonyfill(root) {\n  var result;\n  var Symbol = root.Symbol;\n  if (typeof Symbol === 'function') {\n    if (Symbol.observable) {\n      result = Symbol.observable;\n    } else {\n      result = Symbol('observable');\n      Symbol.observable = result;\n    }\n  } else {\n    result = '@@observable';\n  }\n  return result;\n}\n;","/* global window */\nimport ponyfill from './ponyfill.js';\nvar root;\nif (typeof self !== 'undefined') {\n  root = self;\n} else if (typeof window !== 'undefined') {\n  root = window;\n} else if (typeof global !== 'undefined') {\n  root = global;\n} else if (typeof module !== 'undefined') {\n  root = module;\n} else {\n  root = Function('return this')();\n}\nvar result = ponyfill(root);\nexport default result;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.GRAPHQL_SUBSCRIPTIONS = exports.GRAPHQL_WS = void 0;\nvar GRAPHQL_WS = 'graphql-ws';\nexports.GRAPHQL_WS = GRAPHQL_WS;\nvar GRAPHQL_SUBSCRIPTIONS = 'graphql-subscriptions';\nexports.GRAPHQL_SUBSCRIPTIONS = GRAPHQL_SUBSCRIPTIONS;\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.WS_TIMEOUT = exports.MIN_WS_TIMEOUT = void 0;\nvar MIN_WS_TIMEOUT = 1000;\nexports.MIN_WS_TIMEOUT = MIN_WS_TIMEOUT;\nvar WS_TIMEOUT = 30000;\nexports.WS_TIMEOUT = WS_TIMEOUT;\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar MessageTypes = function () {\n  function MessageTypes() {\n    throw new Error('Static Class');\n  }\n  MessageTypes.GQL_CONNECTION_INIT = 'connection_init';\n  MessageTypes.GQL_CONNECTION_ACK = 'connection_ack';\n  MessageTypes.GQL_CONNECTION_ERROR = 'connection_error';\n  MessageTypes.GQL_CONNECTION_KEEP_ALIVE = 'ka';\n  MessageTypes.GQL_CONNECTION_TERMINATE = 'connection_terminate';\n  MessageTypes.GQL_START = 'start';\n  MessageTypes.GQL_DATA = 'data';\n  MessageTypes.GQL_ERROR = 'error';\n  MessageTypes.GQL_COMPLETE = 'complete';\n  MessageTypes.GQL_STOP = 'stop';\n  MessageTypes.SUBSCRIPTION_START = 'subscription_start';\n  MessageTypes.SUBSCRIPTION_DATA = 'subscription_data';\n  MessageTypes.SUBSCRIPTION_SUCCESS = 'subscription_success';\n  MessageTypes.SUBSCRIPTION_FAIL = 'subscription_fail';\n  MessageTypes.SUBSCRIPTION_END = 'subscription_end';\n  MessageTypes.INIT = 'init';\n  MessageTypes.INIT_SUCCESS = 'init_success';\n  MessageTypes.INIT_FAIL = 'init_fail';\n  MessageTypes.KEEP_ALIVE = 'keepalive';\n  return MessageTypes;\n}();\nexports.default = MessageTypes;\n","\"use strict\";\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __generator = this && this.__generator || function (thisArg, body) {\n  var _ = {\n      label: 0,\n      sent: function () {\n        if (t[0] & 1) throw t[1];\n        return t[1];\n      },\n      trys: [],\n      ops: []\n    },\n    f,\n    y,\n    t,\n    g;\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n    while (_) try {\n      if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n      if (y = 0, t) op = [op[0] & 2, t.value];\n      switch (op[0]) {\n        case 0:\n        case 1:\n          t = op;\n          break;\n        case 4:\n          _.label++;\n          return {\n            value: op[1],\n            done: false\n          };\n        case 5:\n          _.label++;\n          y = op[1];\n          op = [0];\n          continue;\n        case 7:\n          op = _.ops.pop();\n          _.trys.pop();\n          continue;\n        default:\n          if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n            _ = 0;\n            continue;\n          }\n          if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n            _.label = op[1];\n            break;\n          }\n          if (op[0] === 6 && _.label < t[1]) {\n            _.label = t[1];\n            t = op;\n            break;\n          }\n          if (t && _.label < t[2]) {\n            _.label = t[2];\n            _.ops.push(op);\n            break;\n          }\n          if (t[2]) _.ops.pop();\n          _.trys.pop();\n          continue;\n      }\n      op = body.call(thisArg, _);\n    } catch (e) {\n      op = [6, e];\n      y = 0;\n    } finally {\n      f = t = 0;\n    }\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n};\nvar __spreadArrays = this && this.__spreadArrays || function () {\n  for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n  for (var r = Array(s), k = 0, i = 0; i < il; i++) for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++) r[k] = a[j];\n  return r;\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.SubscriptionClient = void 0;\nvar _global = typeof global !== 'undefined' ? global : typeof window !== 'undefined' ? window : {};\nvar NativeWebSocket = _global.WebSocket || _global.MozWebSocket;\nvar Backoff = require(\"backo2\");\nvar eventemitter3_1 = require(\"eventemitter3\");\nvar is_string_1 = require(\"./utils/is-string\");\nvar is_object_1 = require(\"./utils/is-object\");\nvar printer_1 = require(\"graphql/language/printer\");\nvar getOperationAST_1 = require(\"graphql/utilities/getOperationAST\");\nvar symbol_observable_1 = require(\"symbol-observable\");\nvar protocol_1 = require(\"./protocol\");\nvar defaults_1 = require(\"./defaults\");\nvar message_types_1 = require(\"./message-types\");\nvar SubscriptionClient = function () {\n  function SubscriptionClient(url, options, webSocketImpl, webSocketProtocols) {\n    var _a = options || {},\n      _b = _a.connectionCallback,\n      connectionCallback = _b === void 0 ? undefined : _b,\n      _c = _a.connectionParams,\n      connectionParams = _c === void 0 ? {} : _c,\n      _d = _a.minTimeout,\n      minTimeout = _d === void 0 ? defaults_1.MIN_WS_TIMEOUT : _d,\n      _e = _a.timeout,\n      timeout = _e === void 0 ? defaults_1.WS_TIMEOUT : _e,\n      _f = _a.reconnect,\n      reconnect = _f === void 0 ? false : _f,\n      _g = _a.reconnectionAttempts,\n      reconnectionAttempts = _g === void 0 ? Infinity : _g,\n      _h = _a.lazy,\n      lazy = _h === void 0 ? false : _h,\n      _j = _a.inactivityTimeout,\n      inactivityTimeout = _j === void 0 ? 0 : _j,\n      _k = _a.wsOptionArguments,\n      wsOptionArguments = _k === void 0 ? [] : _k;\n    this.wsImpl = webSocketImpl || NativeWebSocket;\n    if (!this.wsImpl) {\n      throw new Error('Unable to find native implementation, or alternative implementation for WebSocket!');\n    }\n    this.wsProtocols = webSocketProtocols || protocol_1.GRAPHQL_WS;\n    this.connectionCallback = connectionCallback;\n    this.url = url;\n    this.operations = {};\n    this.nextOperationId = 0;\n    this.minWsTimeout = minTimeout;\n    this.wsTimeout = timeout;\n    this.unsentMessagesQueue = [];\n    this.reconnect = reconnect;\n    this.reconnecting = false;\n    this.reconnectionAttempts = reconnectionAttempts;\n    this.lazy = !!lazy;\n    this.inactivityTimeout = inactivityTimeout;\n    this.closedByUser = false;\n    this.backoff = new Backoff({\n      jitter: 0.5\n    });\n    this.eventEmitter = new eventemitter3_1.EventEmitter();\n    this.middlewares = [];\n    this.client = null;\n    this.maxConnectTimeGenerator = this.createMaxConnectTimeGenerator();\n    this.connectionParams = this.getConnectionParams(connectionParams);\n    this.wsOptionArguments = wsOptionArguments;\n    if (!this.lazy) {\n      this.connect();\n    }\n  }\n  Object.defineProperty(SubscriptionClient.prototype, \"status\", {\n    get: function () {\n      if (this.client === null) {\n        return this.wsImpl.CLOSED;\n      }\n      return this.client.readyState;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  SubscriptionClient.prototype.close = function (isForced, closedByUser) {\n    if (isForced === void 0) {\n      isForced = true;\n    }\n    if (closedByUser === void 0) {\n      closedByUser = true;\n    }\n    this.clearInactivityTimeout();\n    if (this.client !== null) {\n      this.closedByUser = closedByUser;\n      if (isForced) {\n        this.clearCheckConnectionInterval();\n        this.clearMaxConnectTimeout();\n        this.clearTryReconnectTimeout();\n        this.unsubscribeAll();\n        this.sendMessage(undefined, message_types_1.default.GQL_CONNECTION_TERMINATE, null);\n      }\n      this.client.close();\n      this.client.onopen = null;\n      this.client.onclose = null;\n      this.client.onerror = null;\n      this.client.onmessage = null;\n      this.client = null;\n      this.eventEmitter.emit('disconnected');\n      if (!isForced) {\n        this.tryReconnect();\n      }\n    }\n  };\n  SubscriptionClient.prototype.request = function (request) {\n    var _a;\n    var getObserver = this.getObserver.bind(this);\n    var executeOperation = this.executeOperation.bind(this);\n    var unsubscribe = this.unsubscribe.bind(this);\n    var opId;\n    this.clearInactivityTimeout();\n    return _a = {}, _a[symbol_observable_1.default] = function () {\n      return this;\n    }, _a.subscribe = function (observerOrNext, onError, onComplete) {\n      var observer = getObserver(observerOrNext, onError, onComplete);\n      opId = executeOperation(request, function (error, result) {\n        if (error === null && result === null) {\n          if (observer.complete) {\n            observer.complete();\n          }\n        } else if (error) {\n          if (observer.error) {\n            observer.error(error[0]);\n          }\n        } else {\n          if (observer.next) {\n            observer.next(result);\n          }\n        }\n      });\n      return {\n        unsubscribe: function () {\n          if (opId) {\n            unsubscribe(opId);\n            opId = null;\n          }\n        }\n      };\n    }, _a;\n  };\n  SubscriptionClient.prototype.on = function (eventName, callback, context) {\n    var handler = this.eventEmitter.on(eventName, callback, context);\n    return function () {\n      handler.off(eventName, callback, context);\n    };\n  };\n  SubscriptionClient.prototype.onConnected = function (callback, context) {\n    return this.on('connected', callback, context);\n  };\n  SubscriptionClient.prototype.onConnecting = function (callback, context) {\n    return this.on('connecting', callback, context);\n  };\n  SubscriptionClient.prototype.onDisconnected = function (callback, context) {\n    return this.on('disconnected', callback, context);\n  };\n  SubscriptionClient.prototype.onReconnected = function (callback, context) {\n    return this.on('reconnected', callback, context);\n  };\n  SubscriptionClient.prototype.onReconnecting = function (callback, context) {\n    return this.on('reconnecting', callback, context);\n  };\n  SubscriptionClient.prototype.onError = function (callback, context) {\n    return this.on('error', callback, context);\n  };\n  SubscriptionClient.prototype.unsubscribeAll = function () {\n    var _this = this;\n    Object.keys(this.operations).forEach(function (subId) {\n      _this.unsubscribe(subId);\n    });\n  };\n  SubscriptionClient.prototype.applyMiddlewares = function (options) {\n    var _this = this;\n    return new Promise(function (resolve, reject) {\n      var queue = function (funcs, scope) {\n        var next = function (error) {\n          if (error) {\n            reject(error);\n          } else {\n            if (funcs.length > 0) {\n              var f = funcs.shift();\n              if (f) {\n                f.applyMiddleware.apply(scope, [options, next]);\n              }\n            } else {\n              resolve(options);\n            }\n          }\n        };\n        next();\n      };\n      queue(__spreadArrays(_this.middlewares), _this);\n    });\n  };\n  SubscriptionClient.prototype.use = function (middlewares) {\n    var _this = this;\n    middlewares.map(function (middleware) {\n      if (typeof middleware.applyMiddleware === 'function') {\n        _this.middlewares.push(middleware);\n      } else {\n        throw new Error('Middleware must implement the applyMiddleware function.');\n      }\n    });\n    return this;\n  };\n  SubscriptionClient.prototype.getConnectionParams = function (connectionParams) {\n    return function () {\n      return new Promise(function (resolve, reject) {\n        if (typeof connectionParams === 'function') {\n          try {\n            return resolve(connectionParams.call(null));\n          } catch (error) {\n            return reject(error);\n          }\n        }\n        resolve(connectionParams);\n      });\n    };\n  };\n  SubscriptionClient.prototype.executeOperation = function (options, handler) {\n    var _this = this;\n    if (this.client === null) {\n      this.connect();\n    }\n    var opId = this.generateOperationId();\n    this.operations[opId] = {\n      options: options,\n      handler: handler\n    };\n    this.applyMiddlewares(options).then(function (processedOptions) {\n      _this.checkOperationOptions(processedOptions, handler);\n      if (_this.operations[opId]) {\n        _this.operations[opId] = {\n          options: processedOptions,\n          handler: handler\n        };\n        _this.sendMessage(opId, message_types_1.default.GQL_START, processedOptions);\n      }\n    }).catch(function (error) {\n      _this.unsubscribe(opId);\n      handler(_this.formatErrors(error));\n    });\n    return opId;\n  };\n  SubscriptionClient.prototype.getObserver = function (observerOrNext, error, complete) {\n    if (typeof observerOrNext === 'function') {\n      return {\n        next: function (v) {\n          return observerOrNext(v);\n        },\n        error: function (e) {\n          return error && error(e);\n        },\n        complete: function () {\n          return complete && complete();\n        }\n      };\n    }\n    return observerOrNext;\n  };\n  SubscriptionClient.prototype.createMaxConnectTimeGenerator = function () {\n    var minValue = this.minWsTimeout;\n    var maxValue = this.wsTimeout;\n    return new Backoff({\n      min: minValue,\n      max: maxValue,\n      factor: 1.2\n    });\n  };\n  SubscriptionClient.prototype.clearCheckConnectionInterval = function () {\n    if (this.checkConnectionIntervalId) {\n      clearInterval(this.checkConnectionIntervalId);\n      this.checkConnectionIntervalId = null;\n    }\n  };\n  SubscriptionClient.prototype.clearMaxConnectTimeout = function () {\n    if (this.maxConnectTimeoutId) {\n      clearTimeout(this.maxConnectTimeoutId);\n      this.maxConnectTimeoutId = null;\n    }\n  };\n  SubscriptionClient.prototype.clearTryReconnectTimeout = function () {\n    if (this.tryReconnectTimeoutId) {\n      clearTimeout(this.tryReconnectTimeoutId);\n      this.tryReconnectTimeoutId = null;\n    }\n  };\n  SubscriptionClient.prototype.clearInactivityTimeout = function () {\n    if (this.inactivityTimeoutId) {\n      clearTimeout(this.inactivityTimeoutId);\n      this.inactivityTimeoutId = null;\n    }\n  };\n  SubscriptionClient.prototype.setInactivityTimeout = function () {\n    var _this = this;\n    if (this.inactivityTimeout > 0 && Object.keys(this.operations).length === 0) {\n      this.inactivityTimeoutId = setTimeout(function () {\n        if (Object.keys(_this.operations).length === 0) {\n          _this.close();\n        }\n      }, this.inactivityTimeout);\n    }\n  };\n  SubscriptionClient.prototype.checkOperationOptions = function (options, handler) {\n    var query = options.query,\n      variables = options.variables,\n      operationName = options.operationName;\n    if (!query) {\n      throw new Error('Must provide a query.');\n    }\n    if (!handler) {\n      throw new Error('Must provide an handler.');\n    }\n    if (!is_string_1.default(query) && !getOperationAST_1.getOperationAST(query, operationName) || operationName && !is_string_1.default(operationName) || variables && !is_object_1.default(variables)) {\n      throw new Error('Incorrect option types. query must be a string or a document,' + '`operationName` must be a string, and `variables` must be an object.');\n    }\n  };\n  SubscriptionClient.prototype.buildMessage = function (id, type, payload) {\n    var payloadToReturn = payload && payload.query ? __assign(__assign({}, payload), {\n      query: typeof payload.query === 'string' ? payload.query : printer_1.print(payload.query)\n    }) : payload;\n    return {\n      id: id,\n      type: type,\n      payload: payloadToReturn\n    };\n  };\n  SubscriptionClient.prototype.formatErrors = function (errors) {\n    if (Array.isArray(errors)) {\n      return errors;\n    }\n    if (errors && errors.errors) {\n      return this.formatErrors(errors.errors);\n    }\n    if (errors && errors.message) {\n      return [errors];\n    }\n    return [{\n      name: 'FormatedError',\n      message: 'Unknown error',\n      originalError: errors\n    }];\n  };\n  SubscriptionClient.prototype.sendMessage = function (id, type, payload) {\n    this.sendMessageRaw(this.buildMessage(id, type, payload));\n  };\n  SubscriptionClient.prototype.sendMessageRaw = function (message) {\n    switch (this.status) {\n      case this.wsImpl.OPEN:\n        var serializedMessage = JSON.stringify(message);\n        try {\n          JSON.parse(serializedMessage);\n        } catch (e) {\n          this.eventEmitter.emit('error', new Error(\"Message must be JSON-serializable. Got: \" + message));\n        }\n        this.client.send(serializedMessage);\n        break;\n      case this.wsImpl.CONNECTING:\n        this.unsentMessagesQueue.push(message);\n        break;\n      default:\n        if (!this.reconnecting) {\n          this.eventEmitter.emit('error', new Error('A message was not sent because socket is not connected, is closing or ' + 'is already closed. Message was: ' + JSON.stringify(message)));\n        }\n    }\n  };\n  SubscriptionClient.prototype.generateOperationId = function () {\n    return String(++this.nextOperationId);\n  };\n  SubscriptionClient.prototype.tryReconnect = function () {\n    var _this = this;\n    if (!this.reconnect || this.backoff.attempts >= this.reconnectionAttempts) {\n      return;\n    }\n    if (!this.reconnecting) {\n      Object.keys(this.operations).forEach(function (key) {\n        _this.unsentMessagesQueue.push(_this.buildMessage(key, message_types_1.default.GQL_START, _this.operations[key].options));\n      });\n      this.reconnecting = true;\n    }\n    this.clearTryReconnectTimeout();\n    var delay = this.backoff.duration();\n    this.tryReconnectTimeoutId = setTimeout(function () {\n      _this.connect();\n    }, delay);\n  };\n  SubscriptionClient.prototype.flushUnsentMessagesQueue = function () {\n    var _this = this;\n    this.unsentMessagesQueue.forEach(function (message) {\n      _this.sendMessageRaw(message);\n    });\n    this.unsentMessagesQueue = [];\n  };\n  SubscriptionClient.prototype.checkConnection = function () {\n    if (this.wasKeepAliveReceived) {\n      this.wasKeepAliveReceived = false;\n      return;\n    }\n    if (!this.reconnecting) {\n      this.close(false, true);\n    }\n  };\n  SubscriptionClient.prototype.checkMaxConnectTimeout = function () {\n    var _this = this;\n    this.clearMaxConnectTimeout();\n    this.maxConnectTimeoutId = setTimeout(function () {\n      if (_this.status !== _this.wsImpl.OPEN) {\n        _this.reconnecting = true;\n        _this.close(false, true);\n      }\n    }, this.maxConnectTimeGenerator.duration());\n  };\n  SubscriptionClient.prototype.connect = function () {\n    var _a;\n    var _this = this;\n    this.client = new ((_a = this.wsImpl).bind.apply(_a, __spreadArrays([void 0, this.url, this.wsProtocols], this.wsOptionArguments)))();\n    this.checkMaxConnectTimeout();\n    this.client.onopen = function () {\n      return __awaiter(_this, void 0, void 0, function () {\n        var connectionParams, error_1;\n        return __generator(this, function (_a) {\n          switch (_a.label) {\n            case 0:\n              if (!(this.status === this.wsImpl.OPEN)) return [3, 4];\n              this.clearMaxConnectTimeout();\n              this.closedByUser = false;\n              this.eventEmitter.emit(this.reconnecting ? 'reconnecting' : 'connecting');\n              _a.label = 1;\n            case 1:\n              _a.trys.push([1, 3,, 4]);\n              return [4, this.connectionParams()];\n            case 2:\n              connectionParams = _a.sent();\n              this.sendMessage(undefined, message_types_1.default.GQL_CONNECTION_INIT, connectionParams);\n              this.flushUnsentMessagesQueue();\n              return [3, 4];\n            case 3:\n              error_1 = _a.sent();\n              this.sendMessage(undefined, message_types_1.default.GQL_CONNECTION_ERROR, error_1);\n              this.flushUnsentMessagesQueue();\n              return [3, 4];\n            case 4:\n              return [2];\n          }\n        });\n      });\n    };\n    this.client.onclose = function () {\n      if (!_this.closedByUser) {\n        _this.close(false, false);\n      }\n    };\n    this.client.onerror = function (err) {\n      _this.eventEmitter.emit('error', err);\n    };\n    this.client.onmessage = function (_a) {\n      var data = _a.data;\n      _this.processReceivedData(data);\n    };\n  };\n  SubscriptionClient.prototype.processReceivedData = function (receivedData) {\n    var parsedMessage;\n    var opId;\n    try {\n      parsedMessage = JSON.parse(receivedData);\n      opId = parsedMessage.id;\n    } catch (e) {\n      throw new Error(\"Message must be JSON-parseable. Got: \" + receivedData);\n    }\n    if ([message_types_1.default.GQL_DATA, message_types_1.default.GQL_COMPLETE, message_types_1.default.GQL_ERROR].indexOf(parsedMessage.type) !== -1 && !this.operations[opId]) {\n      this.unsubscribe(opId);\n      return;\n    }\n    switch (parsedMessage.type) {\n      case message_types_1.default.GQL_CONNECTION_ERROR:\n        if (this.connectionCallback) {\n          this.connectionCallback(parsedMessage.payload);\n        }\n        break;\n      case message_types_1.default.GQL_CONNECTION_ACK:\n        this.eventEmitter.emit(this.reconnecting ? 'reconnected' : 'connected', parsedMessage.payload);\n        this.reconnecting = false;\n        this.backoff.reset();\n        this.maxConnectTimeGenerator.reset();\n        if (this.connectionCallback) {\n          this.connectionCallback();\n        }\n        break;\n      case message_types_1.default.GQL_COMPLETE:\n        var handler = this.operations[opId].handler;\n        delete this.operations[opId];\n        handler.call(this, null, null);\n        break;\n      case message_types_1.default.GQL_ERROR:\n        this.operations[opId].handler(this.formatErrors(parsedMessage.payload), null);\n        delete this.operations[opId];\n        break;\n      case message_types_1.default.GQL_DATA:\n        var parsedPayload = !parsedMessage.payload.errors ? parsedMessage.payload : __assign(__assign({}, parsedMessage.payload), {\n          errors: this.formatErrors(parsedMessage.payload.errors)\n        });\n        this.operations[opId].handler(null, parsedPayload);\n        break;\n      case message_types_1.default.GQL_CONNECTION_KEEP_ALIVE:\n        var firstKA = typeof this.wasKeepAliveReceived === 'undefined';\n        this.wasKeepAliveReceived = true;\n        if (firstKA) {\n          this.checkConnection();\n        }\n        if (this.checkConnectionIntervalId) {\n          clearInterval(this.checkConnectionIntervalId);\n          this.checkConnection();\n        }\n        this.checkConnectionIntervalId = setInterval(this.checkConnection.bind(this), this.wsTimeout);\n        break;\n      default:\n        throw new Error('Invalid message type!');\n    }\n  };\n  SubscriptionClient.prototype.unsubscribe = function (opId) {\n    if (this.operations[opId]) {\n      delete this.operations[opId];\n      this.setInactivityTimeout();\n      this.sendMessage(opId, message_types_1.default.GQL_STOP, undefined);\n    }\n  };\n  return SubscriptionClient;\n}();\nexports.SubscriptionClient = SubscriptionClient;\n","import { Observable, Subscriber } from 'rxjs';\nimport {\n  GraphQLRequestHandler,\n  GraphQLRequestOptions,\n  GraphQLResponseData,\n} from '../types';\nimport { SubscriptionClient } from 'subscriptions-transport-ws';\nimport { simpleResponseObserver } from '../utils';\n\nexport class WebsocketRequestHandler implements GraphQLRequestHandler {\n  client?: SubscriptionClient;\n  cleanup?: () => void;\n\n  onConnected(\n    subscriber: Subscriber<GraphQLResponseData>,\n    error: unknown,\n    data: unknown\n  ) {\n    if (error) {\n      console.log('Subscription connection error', error);\n      subscriber.error(error);\n      return;\n    }\n    console.log('Connected subscription.');\n  }\n\n  handle(request: GraphQLRequestOptions): Observable<GraphQLResponseData> {\n    return new Observable((subscriber) => {\n      this.client = new SubscriptionClient(request.url, {\n        reconnect: true,\n        connectionParams: request.additionalParams,\n        connectionCallback: (error, result) => {\n          this.onConnected(subscriber, error, result);\n        },\n      });\n\n      if (!this.client) {\n        throw new Error('Could not create WS client!');\n      }\n      const requestStartTimestamp = Date.now();\n\n      const res = this.client\n        .request({\n          query: request.query,\n          variables: request.variables,\n          operationName: request.selectedOperation ?? undefined,\n        })\n        .subscribe(\n          simpleResponseObserver(subscriber, request.url, requestStartTimestamp)\n        );\n      this.cleanup = res.unsubscribe;\n\n      return () => {\n        this.destroy();\n      };\n    });\n  }\n\n  async destroy() {\n    this.cleanup?.();\n    this.cleanup = undefined;\n    this.client?.unsubscribeAll();\n    this.client?.close();\n    this.client = undefined;\n  }\n}\n"],"names":["require_backo2","__commonJSMin","exports","module","Backoff","opts","ms","rand","deviation","min","max","jitter","require_eventemitter3","__commonJSMin","exports","module","has","prefix","Events","EE","fn","context","once","addListener","emitter","event","listener","evt","clearEvent","EventEmitter","names","events","name","handlers","i","l","ee","listeners","a1","a2","a3","a4","a5","len","args","length","j","require_is_string","__commonJSMin","exports","isString","value","require_is_object","__commonJSMin","exports","isObject","value","symbolObservablePonyfill","root","result","Symbol","init_ponyfill","__esmMin","es_exports","__export","es_default","root","result","init_es","__esmMin","init_ponyfill","symbolObservablePonyfill","require_protocol","__commonJSMin","exports","GRAPHQL_WS","GRAPHQL_SUBSCRIPTIONS","require_defaults","__commonJSMin","exports","MIN_WS_TIMEOUT","WS_TIMEOUT","require_message_types","__commonJSMin","exports","MessageTypes","require_client","__commonJSMin","exports","__assign","t","s","i","n","p","__awaiter","thisArg","_arguments","P","generator","adopt","value","resolve","reject","fulfilled","step","e","rejected","result","__generator","body","_","f","y","g","verb","v","op","__spreadArrays","il","r","k","a","j","jl","_global","NativeWebSocket","Backoff","eventemitter3_1","is_string_1","is_object_1","printer_1","getOperationAST_1","symbol_observable_1","protocol_1","defaults_1","message_types_1","SubscriptionClient","url","options","webSocketImpl","webSocketProtocols","_a","_b","connectionCallback","_c","connectionParams","_d","minTimeout","_e","timeout","_f","reconnect","_g","reconnectionAttempts","_h","lazy","_j","inactivityTimeout","_k","wsOptionArguments","isForced","closedByUser","request","getObserver","executeOperation","unsubscribe","opId","observerOrNext","onError","onComplete","observer","error","eventName","callback","context","handler","_this","subId","queue","funcs","scope","next","middlewares","middleware","processedOptions","complete","minValue","maxValue","query","variables","operationName","id","type","payload","payloadToReturn","errors","message","serializedMessage","key","delay","error_1","err","data","receivedData","parsedMessage","parsedPayload","firstKA","import_subscriptions_transport_ws","WebsocketRequestHandler","onConnected","subscriber","error","data","console","log","handle","request","Observable","client","SubscriptionClient","url","reconnect","connectionParams","additionalParams","connectionCallback","result","Error","requestStartTimestamp","Date","now","res","query","variables","operationName","selectedOperation","undefined","subscribe","simpleResponseObserver","cleanup","unsubscribe","destroy","__async","unsubscribeAll","close"],"mappings":"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","debug_id":"67dc43d1-ff9d-5ff2-8961-640bb4d5f10c"}